---
title: éƒŠç‹¼æƒ…è¶£è„‰å†²ä¸»æœº V3 è“ç‰™åè®®
outline: [2,3,4]
---

# éƒŠç‹¼æƒ…è¶£è„‰å†²ä¸»æœº V3 è“ç‰™åè®®

## æ ¸å¿ƒæ¦‚è§ˆ

- åŒé€šé“ï¼ˆA/Bï¼‰ç‹¬ç«‹è„‰å†²æ¨¡å—ï¼›æ‰€æœ‰æ•°æ®é€šè¿‡ 0x180C æœåŠ¡çš„ 0x150A/0x150B ç‰¹æ€§äº¤äº’ã€‚
- ä¸ V2 ä¸åŒï¼šæ— éœ€å¤§å°ç«¯è½¬æ¢ï¼›B0 ä¸€æ¡æŒ‡ä»¤åŒæ—¶æºå¸¦ä¸¤é€šé“å¼ºåº¦ä¸ 4 ç»„æ³¢å½¢ã€‚
- å…³é”®å˜é‡ï¼šé€šé“å¼ºåº¦ã€é€šé“å¼ºåº¦è½¯ä¸Šé™ã€æ³¢å½¢é¢‘ç‡ã€æ³¢å½¢å¼ºåº¦ã€é¢‘ç‡å¹³è¡¡å‚æ•° 1ã€é¢‘ç‡å¹³è¡¡å‚æ•° 2ã€‚

## è“ç‰™ç‰¹æ€§

| æœåŠ¡ UUID | ç‰¹æ€§ UUID | å±æ€§ | åç§° | å¤§å°(BYTE) | è¯´æ˜ |
| :-------: | :-------: | :--: | :--: | :--------: | :-- |
| 0x180C | 0x150A | å†™ | WRITE | æœ€é•¿ 20 å­—èŠ‚ | æ‰€æœ‰æŒ‡ä»¤è¾“å…¥ |
| 0x180C | 0x150B | é€šçŸ¥ | NOTIFY | æœ€é•¿ 20 å­—èŠ‚ | æ‰€æœ‰å›åº”æ¶ˆæ¯ |
| 0x180A | 0x1500 | è¯»/é€šçŸ¥ | READ/NOTIFY | 1 å­—èŠ‚ | ç”µé‡ä¿¡æ¯ |

åŸºç¡€ UUIDï¼š`0000xxxx-0000-1000-8000-00805f9b34fb`ï¼ˆå°† xxxx æ›¿æ¢ä¸ºæœåŠ¡/ç‰¹æ€§ UUIDï¼‰

## è“ç‰™åç§°

- è„‰å†²ä¸»æœº 3.0 : 47L121000
- æ— çº¿ä¼ æ„Ÿå™¨ : 47L120100

## åŸºæœ¬åŸç†

éƒŠç‹¼å†…ç½®äº†ä¸¤ç»„ç‹¬ç«‹çš„è„‰å†²ç”Ÿæˆæ¨¡å—ï¼Œåˆ†åˆ«å¯¹åº” Aï¼ŒB ä¸¤ä¸ªé€šé“ã€‚æ¯ç»„è„‰å†²ç”Ÿæˆæ¨¡å—ç”±é€šé“å¼ºåº¦å’Œé€šé“æ³¢å½¢æ•°æ®ä¸¤éƒ¨åˆ†æ„æˆã€‚é€šè¿‡é€šé“å¼ºåº¦ï¼Œé€šé“å¼ºåº¦è½¯ä¸Šé™ï¼Œæ³¢å½¢é¢‘ç‡ï¼Œæ³¢å½¢å¼ºåº¦ï¼Œé¢‘ç‡å¹³è¡¡å‚æ•° 1ï¼Œé¢‘ç‡å¹³è¡¡å‚æ•° 2 å…­ä¸ªå˜é‡æ¥æ§åˆ¶è„‰å†²ç”Ÿæˆæ¨¡å—ã€‚

## è“ç‰™æŒ‡ä»¤

ä¸ V2 åè®®ä¸åŒçš„æ˜¯ï¼Œæ•°æ®æ— éœ€è¿›è¡Œå¤§å°ç«¯è½¬æ¢ã€‚

### B0 æŒ‡ä»¤ï¼ˆå¼ºåº¦ + æ³¢å½¢ï¼Œ20 å­—èŠ‚ï¼Œæ¯ 100ms å†™å…¥ï¼‰

`0xB0(1byteæŒ‡ä»¤HEAD)+åºåˆ—å·(4bits)+å¼ºåº¦å€¼è§£è¯»æ–¹å¼(4bits)+Aé€šé“å¼ºåº¦è®¾å®šå€¼(1byte)+Bé€šé“å¼ºåº¦è®¾å®šå€¼(1byte)+Aé€šé“æ³¢å½¢é¢‘ç‡4æ¡(4bytes)+Aé€šé“æ³¢å½¢å¼ºåº¦4æ¡(4bytes)+Bé€šé“æ³¢å½¢é¢‘ç‡4æ¡(4bytes)+Bé€šé“æ³¢å½¢å¼ºåº¦4æ¡(4bytes)`

#### åºåˆ—å·

åºåˆ—å·èŒƒå›´(0b0000 ~ 0b1111)ã€‚å¦‚æœè¾“å…¥çš„æ•°æ®ä¸­ä¿®æ”¹äº†è„‰å†²ä¸»æœºçš„é€šé“å¼ºåº¦ï¼Œè®¾ç½®åºåˆ—å· >0ï¼Œè„‰å†²ä¸»æœºä¼šé€šè¿‡ B1 å›åº”æ¶ˆæ¯ä»¥ç›¸åŒçš„åºåˆ—å·å°†ä¿®æ”¹åçš„é€šé“å¼ºåº¦ä»ç‰¹æ€§ 0x150B è¿”å›ï¼Œå¦‚æœä¸éœ€è¦è„‰å†²ä¸»æœºåé¦ˆé€šé“å¼ºåº¦ï¼Œåˆ™åºåˆ—å·è®¾ç½® 0b0000 å³å¯ã€‚ä¸ºé¿å…é—®é¢˜ï¼Œå½“é€šè¿‡ B0 æŒ‡ä»¤ä¿®æ”¹é€šé“å¼ºåº¦ä¸”åºåˆ—å·ä¸ä¸º 0 æ—¶ï¼Œå»ºè®®ç­‰å¾… 150B è¿”å› B1 ä¸”ä¸ºç›¸åŒåºåˆ—å·çš„ä¿¡æ¯åï¼Œå†å¯¹é€šé“å¼ºåº¦è¿›è¡Œä¿®æ”¹ã€‚

#### å¼ºåº¦å€¼è§£è¯»æ–¹å¼ï¼ˆ4bitï¼Œé«˜ä¸¤ä½æ§åˆ¶ Aï¼Œä½ä¸¤ä½æ§åˆ¶ Bï¼‰

- 0b00 -> å¯¹åº”é€šé“å¼ºåº¦ä¸åšæ”¹å˜ï¼ˆè®¾å®šå€¼æ— æ•ˆï¼‰
- 0b01 -> ç›¸å¯¹å¢åŠ 
- 0b10 -> ç›¸å¯¹å‡å°‘
- 0b11 -> ç»å¯¹å˜åŒ–

> e.g  
> å‡è®¾å½“å‰è„‰å†²ä¸»æœºçš„ A é€šé“å¼ºåº¦ä¸º 10ï¼ŒB é€šé“å¼ºåº¦ä¸º 10ã€‚  
> 1. å¼ºåº¦å€¼è§£è¯»æ–¹å¼=0b0000ï¼ŒA é€šé“å¼ºåº¦è®¾å®šå€¼=5ï¼ŒB é€šé“å¼ºåº¦è®¾ç½®å®š=8ï¼ŒB0 æŒ‡ä»¤è¾“å…¥åï¼ŒA=10ï¼ŒB=10  
> 2. å¼ºåº¦å€¼è§£è¯»æ–¹å¼=0b0100ï¼ŒA è®¾å®šå€¼=5ï¼ŒB è®¾å®šå€¼=8ï¼Œè¾“å…¥å A=15ï¼ŒB=10  
> 3. å¼ºåº¦å€¼è§£è¯»æ–¹å¼=0b0010ï¼ŒA è®¾å®šå€¼=5ï¼ŒB è®¾å®šå€¼=8ï¼Œè¾“å…¥å A=10ï¼ŒB=2  
> 4. å¼ºåº¦å€¼è§£è¯»æ–¹å¼=0b0011ï¼ŒA è®¾å®šå€¼=5ï¼ŒB è®¾å®šå€¼=8ï¼Œè¾“å…¥å A=10ï¼ŒB=8  
> 5. å¼ºåº¦å€¼è§£è¯»æ–¹å¼=0b0110ï¼ŒA è®¾å®šå€¼=5ï¼ŒB è®¾å®šå€¼=8ï¼Œè¾“å…¥å A=15ï¼ŒB=2  
> 6. å¼ºåº¦å€¼è§£è¯»æ–¹å¼=0b1101ï¼ŒA è®¾å®šå€¼=5ï¼ŒB è®¾å®šå€¼=8ï¼Œè¾“å…¥å A=5ï¼ŒB=18

#### é€šé“å¼ºåº¦è®¾å®šå€¼

é•¿åº¦ 1 å­—èŠ‚ï¼Œå€¼æœ‰æ•ˆèŒƒå›´(0~200)ï¼Œè¾“å…¥èŒƒå›´å¤–çš„å€¼å‡ä»¥ 0 å¤„ç†ã€‚æ¯é€šé“ç»å¯¹èŒƒå›´ä¹Ÿæ˜¯(0~200)ã€‚

> e.g  
> å‡è®¾å½“å‰ A é€šé“å¼ºåº¦ä¸º 10  
> 1. å¼ºåº¦å€¼è§£è¯»æ–¹å¼=0b0100ï¼Œè®¾å®šå€¼=195 -> A=200  
> 2. å¼ºåº¦å€¼è§£è¯»æ–¹å¼=0b1000ï¼Œè®¾å®šå€¼=20 -> A=0  
> 3. å¼ºåº¦å€¼è§£è¯»æ–¹å¼=0b0100ï¼Œè®¾å®šå€¼=201 -> A=10  
> 4. å¼ºåº¦å€¼è§£è¯»æ–¹å¼=0b1100ï¼Œè®¾å®šå€¼=201 -> A=0

#### é€šé“æ³¢å½¢é¢‘ç‡ / é€šé“æ³¢å½¢å¼ºåº¦

- æ³¢å½¢é¢‘ç‡é•¿åº¦ 1 byteï¼Œå€¼èŒƒå›´(10~240)ã€‚  
- æ³¢å½¢å¼ºåº¦ 1 byteï¼Œå€¼èŒƒå›´(0~100)ã€‚  
- æ¯ 100ms å‘é€ä¸¤é€šé“å„ 4 ç»„é¢‘ç‡ä¸å¼ºåº¦ï¼Œ1 ç»„ä»£è¡¨ 25msã€‚è‹¥æŸé€šé“è¾“å…¥å€¼ä¸åœ¨æœ‰æ•ˆèŒƒå›´ï¼Œåˆ™æ”¾å¼ƒè¯¥é€šé“å…¨éƒ¨ 4 ç»„æ•°æ®ã€‚

ç®—æ³•å‚è€ƒï¼ˆå°† 10~1000 æ˜ å°„ä¸º 10~240ï¼‰ï¼š

```
è¾“å…¥å€¼èŒƒå›´(10 ~ 1000)
æ³¢å½¢é¢‘ç‡ = when(è¾“å…¥å€¼){
    in 10..100 -> {
        è¾“å…¥å€¼
    }
    in 101..600 -> {
        (è¾“å…¥å€¼ - 100)/5 + 100
    }
    in 601..1000 -> {
        (è¾“å…¥å€¼ - 600)/10 + 200
    }
    else -> {
        10
    }
}
```

> e.g  
> 1. æ³¢å½¢é¢‘ç‡ 4 æ¡={10,10,20,30}ï¼Œæ³¢å½¢å¼ºåº¦={0,5,10,50} -> æ­£å¸¸è¾“å‡º  
> 2. æ³¢å½¢é¢‘ç‡ 4 æ¡={10,10,20,30}ï¼Œæ³¢å½¢å¼ºåº¦={0,5,10,101} -> æ”¾å¼ƒå…¨éƒ¨ 4 ç»„æ•°æ®ï¼Œä¸è¾“å‡º

- Tips å¦‚æœå½“å‰åªæƒ³å‘å•ä¸ªé€šé“è¾“å‡ºæ³¢å½¢ï¼Œåˆ™å°†å¦ä¸€ä¸ªé€šé“çš„æ•°æ®ä¸­è¾“å…¥è‡³å°‘ä¸€ä¸ªéæœ‰æ•ˆæ•°æ®(ä¸€æ¡å¤§äº 100 çš„æ³¢å½¢å¼ºåº¦å€¼)ã€‚

### BF æŒ‡ä»¤ï¼ˆè½¯ä¸Šé™ + å¹³è¡¡å‚æ•°ï¼Œ7 å­—èŠ‚ï¼‰

> ğŸš¨ BF æŒ‡ä»¤å†™å…¥ä¹‹åä¼šç›´æ¥ç”Ÿæ•ˆï¼Œæ²¡æœ‰è¿”å›å€¼ï¼Œæ‰€ä»¥æ¯æ¬¡é‡è¿è®¾å¤‡ä¹‹åéƒ½å¿…é¡»é‡æ–°å†™å…¥ BF æŒ‡ä»¤è®¾ç½®è½¯ä¸Šé™ï¼Œé˜²æ­¢å‡ºç°æ„å¤–çš„è½¯ä¸Šé™å€¼ã€‚ğŸš¨

`0xBF(1byteæŒ‡ä»¤HEAD)+ABä¸¤é€šé“å¼ºåº¦è½¯ä¸Šé™(2bytes)+ABä¸¤é€šé“æ³¢å½¢é¢‘ç‡å¹³è¡¡å‚æ•°(2bytes)+ABä¸¤é€šé“æ³¢å½¢å¼ºåº¦å¹³è¡¡å‚æ•°(2bytes)`

#### é€šé“å¼ºåº¦è½¯ä¸Šé™

é™åˆ¶é€šé“å¼ºåº¦æœ€å¤§å€¼ï¼Œæ–­ç”µä¿å­˜ï¼Œå€¼èŒƒå›´(0~200)ï¼Œè¾“å…¥èŒƒå›´å¤–çš„å€¼åˆ™ä¸ä¼šä¿®æ”¹ã€‚  
ä¾‹ï¼šè®¾ç½® AB é€šé“è½¯ä¸Šé™ä¸º 150/30ï¼Œåˆ™æ— è®ºæ‹¨è½®æˆ– B0 å¦‚ä½•ä¿®æ”¹ï¼ŒA èŒƒå›´ 0~150ã€B èŒƒå›´ 0~30ï¼Œå¼ºåº¦ä¸ä¼šè¶…è¿‡è½¯ä¸Šé™ã€‚

#### é¢‘ç‡å¹³è¡¡å‚æ•° 1

è°ƒæ•´æ³¢å½¢é«˜ä½é¢‘ä½“æ„Ÿï¼Œæ–­ç”µä¿å­˜ï¼Œå€¼èŒƒå›´(0~255)ã€‚å€¼è¶Šå¤§ï¼Œä½é¢‘æ³¢å½¢å†²å‡»æ„Ÿè¶Šå¼ºã€‚

#### é¢‘ç‡å¹³è¡¡å‚æ•° 2

è°ƒæ•´æ³¢å½¢è„‰å†²å®½åº¦ï¼Œæ–­ç”µä¿å­˜ï¼Œå€¼èŒƒå›´(0~255)ã€‚å€¼è¶Šå¤§ï¼Œä½é¢‘æ³¢å½¢åˆºæ¿€è¶Šå¼ºã€‚

## è“ç‰™å›åº”æ¶ˆæ¯

æ‰€æœ‰å›è°ƒé€šè¿‡ 0x180C->0x150B çš„ Notify è¿”å›ï¼Œè¿æ¥åéœ€è®¢é˜…è¯¥ç‰¹æ€§ã€‚

### B1 æ¶ˆæ¯

å½“å¼ºåº¦å˜åŒ–æ—¶ç«‹å³è¿”å›å½“å‰å¼ºåº¦å€¼ã€‚è‹¥ç”± B0 å¯¼è‡´ï¼Œåºåˆ—å·ä¸æŒ‡ä»¤ä¸€è‡´ï¼Œå¦åˆ™ä¸º 0ã€‚

`0xB1(1byteæŒ‡ä»¤HEAD)+åºåˆ—å·(1byte)+Aé€šé“å½“å‰å®é™…å¼ºåº¦(1byte)+Bé€šé“å½“å‰å®é™…å¼ºåº¦(1byte)`

### BE æ¶ˆæ¯ï¼ˆå·²å¼ƒç”¨ï¼‰

## æ›´å¤šä¾‹å­

æ•°æ®ç»„æˆï¼š

```
æŒ‡ä»¤HEAD + åºåˆ—å· + å¼ºåº¦å€¼è§£è¯»æ–¹å¼ +
Aé€šé“å¼ºåº¦è®¾å®šå€¼ + Bé€šé“å¼ºåº¦è®¾å®šå€¼ +
Aé€šé“æ³¢å½¢é¢‘ç‡{x,x,x,x} + Aé€šé“æ³¢å½¢å¼ºåº¦{x,x,x,x} +
Bé€šé“æ³¢å½¢é¢‘ç‡{x,x,x,x} + Bé€šé“æ³¢å½¢å¼ºåº¦{x,x,x,x}
```

No.1 ä¸ä¿®æ”¹é€šé“å¼ºåº¦ï¼ŒA é€šé“è¿ç»­è¾“å‡ºæ³¢å½¢:  
1-> 0xB0+0b0000+0b0000+0+0+{10,10,10,10}+{0,10,20,30}+{0,0,0,0}+{0,0,0,101}  
(HEX:0xB00000000A0A0A0A000A141E0000000000000065)  
2-> 0xB0+0b0000+0b0000+0+0+{15,15,15,15}+{40,50,60,70}+{0,0,0,0}+{0,0,0,101}  
(HEX:0xB00000000F0F0F0F28323C460000000000000065)  
3-> 0xB0+0b0000+0b0000+0+0+{30,30,30,30}+{80,90,100,100}+{0,0,0,0}+{0,0,0,101}  
(HEX:0xB00000001E1E1E1E505A64640000000000000065)  
4-> 0xB0+0b0000+0b0000+0+0+{40,60,80,100}+{100,90,90,90}+{0,0,0,0}+{0,0,0,101}  
(HEX:0xB0000000283C5064645A5A5A0000000000000065)  
...

No.2 è„‰å†²ä¸»æœºå½“å‰ A é€šé“å¼ºåº¦=10ï¼ŒA é€šé“è¿ç»­è¾“å‡ºæ³¢å½¢:  
1-> 0xB0+0b0000+0b0100+5+0+{10,10,10,10}+{0,10,20,30}+{0,0,0,0}+{0,0,0,101}  
(HEX:0xB00405000A0A0A0A000A141E0000000000000065)  
2-> 0xB0+0b0000+0b0000+0+0+{15,15,15,15}+{40,50,60,70}+{0,0,0,0}+{0,0,0,101}  
(HEX:0xB00000000F0F0F0F28323C460000000000000065)  
3-> 0xB0+0b0000+0b0000+0+0+{30,30,30,30}+{80,90,100,100}+{0,0,0,0}+{0,0,0,101}  
(HEX:0xB00000001E1E1E1E505A64640000000000000065)  
4-> 0xB0+0b0001+0b0100+10+0+{40,60,80,100}+{100,90,90,90}+{0,0,0,0}+{0,0,0,101}  
(HEX:0xB0140A00283C5064645A5A5A0000000000000065)  
...  
1 ä¸­è®¾ç½® A é€šé“å¼ºåº¦+5ï¼Œè®¾ç½®å A=15ï¼Œä½†ä¸ä¼šè¿”å›ä¿®æ”¹åçš„å¼ºåº¦ï¼ˆåºåˆ—å·=0ï¼‰ã€‚  
4 ä¸­è®¾ç½® A é€šé“å¼ºåº¦+10ï¼Œè®¾ç½®å A=25ï¼Œå¹¶é€šè¿‡ 150B è¿”å› A=25ï¼Œåºåˆ—å·=1ã€‚

No.3 è„‰å†²ä¸»æœºå½“å‰ A é€šé“å¼ºåº¦=10ï¼ŒA é€šé“è¿ç»­è¾“å‡ºæ³¢å½¢:  
1-> 0xB0+0b0000+0b0000+0+0+{10,10,10,10}+{0,10,20,30}+{0,0,0,0}+{0,0,0,101}  
(HEX:0xB00000000A0A0A0A000A141E0000000000000065)  
2-> 0xB0+0b0000+0b0000+0+0+{15,15,15,15}+{40,50,60,70}+{0,0,0,0}+{0,0,0,101}  
(HEX:0xB00000000F0F0F0F28323C460000000000000065)  
3-> å‘ä¸Šæ‹¨åŠ¨ä¸€æ¬¡ A é€šé“æ‹¨è½®åæ”¾å¼€  
4-> 0xB0+0b0000+0b0000+0+0+{30,30,30,30}+{80,90,100,100}+{0,0,0,0}+{0,0,0,101}  
(HEX:0xB00000001E1E1E1E505A64640000000000000065)  
5-> 0xB0+0b0000+0b0000+0+0+{40,60,80,100}+{100,90,90,90}+{0,0,0,0}+{0,0,0,101}  
(HEX:0xB0000000283C5064645A5A5A0000000000000065)  
...  
3 ä¸­æ‹¨è½®å A å¼ºåº¦+1ï¼Œå¹¶è¿”å› A=11ï¼Œåºåˆ—å·=0ã€‚

No.4 ä¸ä¿®æ”¹é€šé“å¼ºåº¦ï¼ŒAB ä¸¤é€šé“å‡è¿ç»­è¾“å‡ºæ³¢å½¢:  
1-> 0xB0+0b0000+0b0000+0+0+{10,10,10,10}+{0,10,20,30}+{10,10,10,10}+{0,0,0,0}  
(HEX:0xB00000000A0A0A0A000A141E0A0A0A0A00000000)  
2-> 0xB0+0b0000+0b0000+0+0+{15,15,15,15}+{40,50,60,70}+{10,10,10,10}+{10,10,10,10}  
(HEX:0xB00000000F0F0F0F28323C460A0A0A0A0A0A0A0A)  
3-> 0xB0+0b0000+0b0000+0+0+{30,30,30,30}+{80,90,100,100}+{10,10,10,10}+{0,0,0,10}  
(HEX:0xB00000001E1E1E1E505A64640A0A0A0A0000000A)  
4-> 0xB0+0b0000+0b0000+0+0+{40,60,80,100}+{0,90,90,90}+{10,10,10,10}+{0,0,0,10}  
(HEX:0xB0000000283C5064005A5A5A0A0A0A0A0000000A)  
...

### åºåˆ—å·ä¸å¼ºåº¦è¾“å…¥ç¤ºä¾‹ä»£ç ï¼ˆåŸæ–‡ï¼‰

```
isInputAllowed = true(å½“å‰æ˜¯å¦å…è®¸è¾“å…¥å¼ºåº¦)
accumulatedStrengthValueA = 0(Aé€šé“æœªå†™å…¥çš„ç´¯è®¡å¼ºåº¦å˜åŒ–å€¼)
deviceStrengthValueA = 0(è„‰å†²ä¸»æœºå½“å‰Aé€šé“å¼ºåº¦å€¼)
orderNo = 0(åºåˆ—å·)
inputOrderNo = 0(B0å†™å…¥çš„åºåˆ—å·)
strengthParsingMethod = 0b0000(å¼ºåº¦å€¼è§£è¯»æ–¹å¼)
strengthSettingValueA = 0(Aé€šé“å¼ºåº¦è®¾å®šå€¼)

Aé€šé“å¼ºåº¦ç›¸å…³æ•°æ®å¤„ç†å‡½æ•°
fun strengthDataProcessingA():Unit{
    if(isInputAllowed == true) {
         strengthParsingMethod = if(accumulatedStrengthValueA > 0){
             0b0100
         }else if(accumulatedStrengthValueA < 0){
             0b1000
         }else{
             0b0000
         }
         orderNo += 1
         inputOrderNo = orderNo
         isInputAllowed = false
         strengthSettingValueA = abs(accumulatedStrengthValueA)(å–ç»å¯¹å€¼)
         accumulatedStrengthValueA = 0
     }else{
         orderNo = 0
         strengthParsingMethod = 0b0000
         strengthSettingValueA = 0
     }
}
Aé€šé“å¼ºåº¦å›åº”æ¶ˆæ¯å¤„ç†å‡½æ•°
fun strengthDataCallback(returnOrderNo : Int,returnStrengthValueA : Int):Unit{
    //returnOrderNo è¿”å›è¾“å…¥çš„åºåˆ—å·
    //returnStrengthValueA è¿”å›è„‰å†²ä¸»æœºå½“å‰Aé€šé“å¼ºåº¦

    deviceStrengthValueA = returnStrengthValueA
    if(returnOrderNo == inputNo){
         isInputAllowed = true
         strengthParsingMethod = 0b0000
         strengthSettingValueA = 0
         inputOrderNo = 0
     }
}
Aé€šé“å¼ºåº¦è®¾ç½®0
fun strengthZero():Unit{
    strengthParsingMethod = 0b1100
    strengthSettingValueA = 0
    orderNo = 1
    inputOrderNo = orderNo
}
```

æ—¶é—´é¡ºåºç¤ºä¾‹ï¼ˆåºå·ä¸ä»£è¡¨å…·ä½“æ—¶åˆ»ï¼‰ï¼š

```
1 -> æŒ‰ä¸‹Aé€šé“å¼ºåº¦â€˜+â€™æŒ‰é’®
     accumulatedStrengthValueA += 1(å€¼ = 1)
2 -> (100mså‘¨æœŸ)B0å‡†å¤‡å†™å…¥
     strengthDataProcessingA()
     BLE WRITE 150A(0xB0 + orderNo(0b0001) + strengthParsingMethod(0b0100) + strengthSettingValueA(1) + ......)
3 -> (100mså‘¨æœŸ)B0å‡†å¤‡å†™å…¥
     strengthDataProcessingA()
     BLE WRITE 150A(0xB0 + orderNo(0b0000) + strengthParsingMethod(0b0000) + strengthSettingValueA(1) + ......)
3 -> 150Bè¿”å›Aé€šé“å¼ºåº¦å€¼
     BLE NOTIFY 150B(0xB1 + returnOrderNo(1) + returnStrengthValueA(1) + ......)
     è¿”å›çš„åºåˆ—å· = 1ï¼Œè¿”å›çš„Aé€šé“å¼ºåº¦ = 1
     strengthDataCallback(1,1)
4 -> æŒ‰ä¸‹Aé€šé“å¼ºåº¦â€˜+â€™æŒ‰é’®
     accumulatedStrengthValueA += 1(å€¼ = 1)
5 -> æŒ‰ä¸‹Aé€šé“å¼ºåº¦â€˜+â€™æŒ‰é’®
     accumulatedStrengthValueA += 1(å€¼ = 2)
6 -> æŒ‰ä¸‹Aé€šé“å¼ºåº¦â€˜+â€™æŒ‰é’®
     accumulatedStrengthValueA += 1(å€¼ = 3)
7 -> (100mså‘¨æœŸ)B0å‡†å¤‡å†™å…¥
     strengthDataProcessingA()
     BLE WRITE 150A(0xB0 + orderNo(0b0001) + strengthParsingMethod(0b0100) + strengthSettingValueA(3) + ......)
8 -> æŒ‰ä¸‹Aé€šé“å¼ºåº¦â€˜+â€™æŒ‰é’®
     accumulatedStrengthValueA += 1(å€¼ = 1)
9 -> (100mså‘¨æœŸ)B0å‡†å¤‡å†™å…¥
     strengthDataProcessingA()
     BLE WRITE 150A(0xB0 + orderNo(0b0000) + strengthParsingMethod(0b0000) + strengthSettingValueA(0) + ......)
10-> 150Bè¿”å›Aé€šé“å¼ºåº¦å€¼
     BLE NOTIFY 150B(0xB1 + returnOrderNo(1) + returnStrengthValueA(4) + ......)
     è¿”å›çš„åºåˆ—å· = 1ï¼Œè¿”å›çš„Aé€šé“å¼ºåº¦ = 4
     strengthDataCallback(1,4)
11-> æŒ‰ä¸‹Aé€šé“å¼ºåº¦â€˜+â€™æŒ‰é’®
     accumulatedStrengthValueA += 1(å€¼ = 2)
12-> (100mså‘¨æœŸ)B0å‡†å¤‡å†™å…¥
     strengthDataProcessingA()
     BLE WRITE 150A(0xB0 + orderNo(0b0001) + strengthParsingMethod(0b0100) + strengthSettingValueA(2) + ......)
13-> æŒ‰ä¸‹Aé€šé“å¼ºåº¦â€˜-â€™æŒ‰é’®
     accumulatedStrengthValueA -= 1(å€¼ = -1)
14-> 150Bè¿”å›Aé€šé“å¼ºåº¦å€¼
     BLE NOTIFY 150B(0xB1 + returnOrderNo(1) + returnStrengthValueA(6) + ......)
     è¿”å›çš„åºåˆ—å· = 1ï¼Œè¿”å›çš„Aé€šé“å¼ºåº¦ = 6
     strengthDataCallback(1,6)
15-> (100mså‘¨æœŸ)B0å‡†å¤‡å†™å…¥
     strengthDataProcessingA()
     BLE WRITE 150A(0xB0 + orderNo(0b0010) + strengthParsingMethod(0b1000) + strengthSettingValueA(1) + ......)
16-> 150Bè¿”å›Aé€šé“å¼ºåº¦å€¼
     BLE NOTIFY 150B(0xB1 + returnOrderNo(2) + returnStrengthValueA(5) + ......)
     è¿”å›çš„åºåˆ—å· = 2ï¼Œè¿”å›çš„Aé€šé“å¼ºåº¦ = 5
     strengthDataCallback(1,5)
17-> (100mså‘¨æœŸ)B0å‡†å¤‡å†™å…¥
     strengthZero()
     BLE WRITE 150A(0xB0 + orderNo(0b0001) + strengthParsingMethod(0b1100) + strengthSettingValueA(0) + ......)
18-> 150Bè¿”å›Aé€šé“å¼ºåº¦å€¼
     BLE NOTIFY 150B(0xB1 + returnOrderNo(1) + returnStrengthValueA(0) + ......)
     è¿”å›çš„åºåˆ—å· = 1ï¼Œè¿”å›çš„Aé€šé“å¼ºåº¦ = 0
     strengthDataCallback(1,0)
......
```
