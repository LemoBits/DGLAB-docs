---
title: 🔋 外部电压检测的解释与使用示例（爪印无线按钮传感器）
outline: [2,3]
---

# 🔋 外部电压检测的解释与使用示例（爪印无线按钮传感器）

::: warning ⚠️ 进阶功能提示
**外部电压检测触发**属于实验性功能（Playground Feature），专为具有一定动手能力的极客玩家设计。
**所需工具**：万用表、导线、Type-C 数据线 (C-C)、电位器 (最大阻值约 20KΩ)、绝缘胶带。
:::

## 📝 基础原理

该功能利用主控芯片的 **ADC（模数转换）** 特性，通过检测 Type-C 接口 **CC1 引脚** 上的电压变化来触发事件。

### 核心参数

| 参数项 | 规格说明 |
| :--- | :--- |
| **信号引脚** | Type-C 接口的 **CC1** 引脚 (经分压后接入 ADC) |
| **检测量程** | `0V ~ 2.1V` |
| **分辨率** | 分 30 档，每档约 `0.07V` |
| **测量误差** | `±5%` |
| **耐压极限** | <Badge type="danger" text="Max 3.0V" /> (超过此值可能损坏硬件) |

::: danger 安全警告
1.  **严禁充电**：在使用此功能时，绝对不要对设备进行充电。
2.  **注意极性**：接线前务必使用万用表检查正负极，接反可能导致设备损坏。
3.  **模拟 vs 数字**：虽然支持模拟电压检测，但由于干扰存在，**强烈建议将其作为“数字开关量”使用**（即只检测 高/低 电平跳变），稳定性最佳。
:::

## ⚙️ 电压检测模式设计

在 APP 中可选择两种检测电路模式，根据你的传感器类型选择：

### 1. 高电平模式（默认 / 推荐）
*   **原理**：启用内部上拉电阻（10KΩ 上拉至电源，4.8KΩ 下拉至地）。悬空时电压约 **1V**。
*   **适用场景**：**无源器件**。如：机械开关、可变电阻（电位器）、光敏电阻等。
*   **接线**：只需在 `CC1` 和 `GND` 之间接入电阻或开关，**无需外部电源**。

### 2. 高阻态模式
*   **原理**：无内部上拉，仅保留 4.8KΩ 下拉接地。
*   **适用场景**：**有源器件**。如：硅光电池、手摇发电机、干电池组。
*   **接线**：外部电压源正极接 `CC1`，负极接 `GND`。
    *   *注意：若外部电压高于 2.1V，必须自行串联分压电阻，并加装钳位电路保护接口。*

## 🔌 硬件连接指南

### 线材改造
推荐使用标准的 **Type-C (C-C)** 线缆进行剪断改造。

### 寻找 CC1 引脚 (关键步骤)
Type-C 接口支持正反插，但按键只检测 **CC1**。
由于线芯颜色无统一标准，**必须使用万用表测量**：

1.  **设备准备**：将按钮传感器设为“旅行状态”（指示灯熄灭，不响应按压）。
2.  **插入线缆**：将剪断后的 Type-C 线插入按钮。
3.  **测量阻值**：
    *   将万用表调至 **电阻档 (Ω)**。
    *   一支表笔接 **GND**（通常是黑色粗线或金属屏蔽层）。
    *   另一支表笔依次测试其余细线。
4.  **判定**：
    *   若测得阻值约 **4.6 kΩ** 🟢 → 找到了，这就是 **CC1**。
    *   若测得阻值约 **5.1 kΩ** 🔴 → 这是 CC2（仅用于供电识别）。
    *   *解决方法*：拔出 Type-C 插头，**翻转 180度 反向插入**，再次测量，原本的 5.1kΩ 线会变为 4.6kΩ。

::: tip 创意玩法参考
利用此接口，你可以接入各种传感器实现自动控制：
*   **声控**：接入驻极体麦克风模块。
*   **光控**：接入光敏电阻（天黑/开灯触发）。
*   **动能**：接入仓鼠跑轮上的小马达。
*   **触摸**：接入自制的铜箔触摸开关。
:::

---

## 🧪 Demo：电位器控制强度

> 建议在正式 DIY 复杂传感器前，先按照本 Demo 跑通流程。

### 1. 硬件制作
*   **材料**：电位器 x1，剪断的 Type-C 线 x1。
*   **接线**：
    *   找出 Type-C 线的 `CC1` 和 `GND`（参考上文测量法）。
    *   电位器**中间引脚**（抽头）接 `CC1`。
    *   电位器**任一侧引脚**接 `GND`。
    *   做好绝缘处理。

![硬件连接示意](/PawPrints/img/img1.JPEG)
![电位器特写](/PawPrints/img/img2.JPEG)

### 2. APP 设置
1.  **连接设备**：确保按钮已绑定，APP 中眼灯颜色同步。
2.  **添加玩法**：在功能列表中选择“外部电压检测触发”。
3.  **参数配置**：
    *   **测量模式**：`高电平模式`（利用内部供电）。
    *   **目标电压范围**：例如 `0.49V ~ 0.84V`。
        *   *注：20KΩ 电位器在此模式下最大分压约 0.92V。*
    *   **参数映射**：设置 `0.35V` (对应旧版数值 43)。
    *   **触发动作**：`强度临时改变` -> `参数决定` -> 范围 `+1 ~ +40`。

![APP设置界面](/PawPrints/img/img3.jpeg)

### 3. 效果测试
启动通道输出，缓慢旋转电位器：
*   **未触发区**：电压在目标范围外，无变化。
*   **触发区**：电压进入 `0.49V ~ 0.84V`。
*   **动态反馈**：随着电压值偏离目标范围中心的程度，强度会自动增加（0 -> 40 -> 0）。

![效果演示](/PawPrints/img/img4.jpeg)